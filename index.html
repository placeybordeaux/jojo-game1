<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Girl in a House Game</title>
    <style>
        canvas {
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="800" height="400"></canvas>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // Image objects
        const images = {
            girl: { src: 'girl.png' },
            apple: { src: 'apple.png' },
            cookie: { src: 'cookie.png' },
            house: { src: 'house.png' }
        };

        // Load images
        let imagesLoaded = 0;
        const totalImages = Object.keys(images).length;

        for (let key in images) {
            images[key].img = new Image();
            images[key].img.onload = function() {
                imagesLoaded++;
                if (imagesLoaded === totalImages) {
                    startGame();
                }
            };
            images[key].img.src = images[key].src;
        }

        // Game state
        const girl = {
            x: 100,
            y: 300,
            width: 50,
            height: 100,
            speed: 5
        };

        const apple = {
            x: 600,
            y: 350,
            width: 30,
            height: 30,
            eaten: false
        };

        const cookie = {
            x: 50,
            y: 350,
            width: 30,
            height: 30,
            eaten: false
        };

        const speechBubble = {
            visible: false,
            duration: 2000,  // 2 seconds
            startTime: 0
        };

        let rightPressed = false;
        let leftPressed = false;
        let upPressed = false;
        let downPressed = false;

        // Event listeners
        document.addEventListener('keydown', keyDownHandler);
        document.addEventListener('keyup', keyUpHandler);

        function keyDownHandler(e) {
            if (e.key === 'Right' || e.key === 'ArrowRight') {
                rightPressed = true;
            } else if (e.key === 'Left' || e.key === 'ArrowLeft') {
                leftPressed = true;
          } else if (e.key === 'Up' || e.key === 'ArrowUp') {
                upPressed = true;
          } else if (e.key === 'Down' || e.key === 'ArrowDown') {
                downPressed = true;
            } else if (e.key === ' ' || e.key === 'Spacebar') {
                interact();
            }
        }

        function keyUpHandler(e) {
            if (e.key === 'Right' || e.key === 'ArrowRight') {
                rightPressed = false;
          } else if (e.key === 'Up' || e.key === 'ArrowUp') {
                upPressed = false;
            } else if (e.key === 'Down' || e.key === 'ArrowDown') {
            downPressed = false;
            } else if (e.key === 'Left' || e.key === 'ArrowLeft') {
                leftPressed = false;
            }
        }

        function interact() {
          interactApple();
          interactCookie();
        }

        function showSpeechBubble(text) {
            speechBubble.text = text;
            speechBubble.visible = true;
            speechBubble.startTime = Date.now();
        }

        function drawGirl() {
            ctx.drawImage(images.girl.img, girl.x, girl.y, girl.width, girl.height);
        }

        function drawApple() {
            if (!apple.eaten) {
                ctx.drawImage(images.apple.img, apple.x, apple.y, apple.width, apple.height);
            }
        }

        function interactApple() {
            if (!apple.eaten && 
                girl.x < apple.x + apple.width &&
                girl.x + girl.width > apple.x &&
                girl.y < apple.y + apple.height &&
                girl.y + girl.height > apple.y) {
                apple.eaten = true;
                showSpeechBubble('Hiccup!');
            }
        }

        function interactCookie() {
            if (!cookie.eaten && 
                girl.x < cookie.x + apple.width &&
                girl.x + girl.width > cookie.x &&
                girl.y < cookie.y + apple.height &&
                girl.y + girl.height > cookie.y) {
                cookie.eaten = true;
                showSpeechBubble('Yum! I love it!');
            }
        }

        function drawCookie() {
            if (!cookie.eaten) {
                ctx.drawImage(images.cookie.img, cookie.x, cookie.y, cookie.width, cookie.height);
            }
        }

        function drawHouse() {
            ctx.drawImage(images.house.img, 0, 0, canvas.width, canvas.height);
        }

        function drawSpeechBubble() {
            if (speechBubble.visible) {
                const currentTime = Date.now();
                if (currentTime - speechBubble.startTime < speechBubble.duration) {
                    ctx.fillStyle = 'white';
                    ctx.beginPath();
                    ctx.moveTo(girl.x + girl.width / 2, girl.y - 10);
                    ctx.lineTo(girl.x + girl.width / 2 - 5, girl.y - 20);
                    ctx.lineTo(girl.x + girl.width / 2 + 5, girl.y - 20);
                    ctx.fill();
                    
                    ctx.beginPath();
                    ctx.ellipse(girl.x + girl.width / 2, girl.y - 50, 40, 30, 0, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.fillStyle = 'black';
                    ctx.font = '16px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(speechBubble.text, girl.x + girl.width / 2, girl.y - 45);
                } else {
                    speechBubble.visible = false;
                }
            }
        }

        function update() {
            if (rightPressed && girl.x < canvas.width - girl.width) {
                girl.x += girl.speed;
            } else if (leftPressed && girl.x > 0) {
                girl.x -= girl.speed;
            } else if (upPressed && girl.y > 0) {
               girl.y -= girl.speed;
          } else if (downPressed && girl.y < canvas.height) {
              girl.y += girl.speed;
          }
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawHouse();
            drawGirl();
            drawApple();
            drawCookie();
            drawSpeechBubble();
        }

        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        function startGame() {
            gameLoop();
        }
    </script>
</body>
</html>
